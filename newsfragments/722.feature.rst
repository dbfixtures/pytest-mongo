Replace TypedDict-based config with a dataclass-based config.
